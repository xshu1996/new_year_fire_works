window.__require=function t(e,r,n){function o(s,c){if(!r[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!c&&h)return h(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var d=r[s]={exports:{}};e[s][0].call(d.exports,function(t){return o(e[s][1][t]||t)},d,d.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({Main:[function(t,e,r){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Main");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot_prefab=null,e}return o(e,t),e.prototype.getQueryVariable=function(t){for(var e=window.location.search.substring(1).split("&"),r=0;r<e.length;r++){var n=e[r].split("=");if(n[0]==t)return n[1]}return""},e.prototype.onLoad=function(){var t=this,e=cc.find("Canvas/LabBlessing").getComponent(cc.Label);e.string=decodeURI(this.getQueryVariable("blessing")),e.node.runAction(cc.sequence(cc.fadeOut(.5),cc.delayTime(.5),cc.fadeIn(.5),cc.delayTime(.5)).repeatForever()),this.renTexs=[new cc.RenderTexture,new cc.RenderTexture],this.renTexs[0].initWithSize(640,1440),this.renTexs[1].initWithSize(640,1440),this.sfs=[new cc.SpriteFrame(this.renTexs[0]),new cc.SpriteFrame(this.renTexs[1])],this.renTexIndex=-1,this.sp=this.node.getChildByName("sp").getComponent(cc.Sprite),this.midCamera=this.node.getChildByName("midCamera").getComponent(cc.Camera),this.mid=this.midCamera.node.getChildByName("mid"),this.mid_sp=this.mid.getChildByName("sp").getComponent(cc.Sprite);var r,n=this.mid.getChildByName("rect");n.on(cc.Node.EventType.TOUCH_START,function(t){r=t.getLocation()}),n.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.getLocation();n.x+=e.x-r.x,n.y+=e.y-r.y,r=e}),this.dots=[],this.flowers=[],this.sp.node.on(cc.Node.EventType.TOUCH_START,function(e){for(var r=t.node.convertToNodeSpaceAR(e.getLocation()),n=[],o=0;o<200;o++){var i=cc.instantiate(t.dot_prefab);t.mid.addChild(i),i.y=-1e4,n[o]=i}t.dots.push(new p(n,r.x,r.y,200+200*Math.random()))})},e.prototype.update=function(){for(var t=this.dots.length;t--;){var e=this.dots[t];e.step()&&(this.dots.splice(t,1),this.flowers.push(new l(e.dots)),e.clear())}for(t=this.flowers.length;t--;){var r=this.flowers[t];r.step()&&(this.flowers.splice(t,1),r.clear())}++this.renTexIndex>=this.renTexs.length&&(this.renTexIndex=0),this.midCamera.targetTexture=this.renTexs[this.renTexIndex],this.sp.spriteFrame=this.sfs[this.renTexIndex],this.mid_sp.spriteFrame=this.sfs[this.renTexs.length-1-this.renTexIndex]},i([a(cc.Prefab)],e.prototype,"dot_prefab",void 0),i([c],e)}(cc.Component);r.default=h;var d=[new cc.Color(255,100,0),new cc.Color(0,255,100),new cc.Color(100,0,255),new cc.Color(255,255,100),new cc.Color(255,100,255),new cc.Color(100,255,255)],p=function(){function t(t,e,r,n){var o=d[Math.floor(Math.random()*d.length)];this.dots=t;for(var i=0,s=this.dots;i<s.length;i++){var c=s[i];Math.random()<.6?c.color=o:c["\u95ea"]=!0}this.x=e,this.y=r,this.\u7206\u70b9=n}return t.prototype.step=function(){this.y+=10;for(var t=0,e=this.dots;t<e.length;t++){var r=e[t],n=2*Math.PI*Math.random();r.x=this.x+10*Math.random()*Math.cos(n),r.y=this.y+10*Math.random()*Math.sin(n)}return this.y>=this.\u7206\u70b9},t.prototype.clear=function(){this.dots=null},t}(),l=function(){function t(t){this.dots=t;for(var e=0,r=this.dots;e<r.length;e++){var n=r[e],o=2*Math.PI*Math.random();n.vx=10*Math.random()*Math.cos(o),n.vy=5+10*Math.random()*Math.sin(o)}this.count=0}return t.prototype.step=function(){for(var t=0,e=this.dots;t<e.length;t++){var r=e[t];r.vy+=-.2,r.vx*=.99,r.vy*=.99,r.x+=r.vx,r.y+=r.vy,r["\u95ea"]?r.active=Math.random()<.5:r.opacity*=.995}return++this.count>=200},t.prototype.clear=function(){for(var t=0,e=this.dots;t<e.length;t++)e[t].destroy();this.dots.length=0,this.dots=null},t}();cc._RF.pop()},{}]},{},["Main"]);